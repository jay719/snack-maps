"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("util");
const debug_1 = __importDefault(require("debug"));
const indent_string_1 = __importDefault(require("indent-string"));
class TestRunDebugLog {
    constructor(userAgent) {
        this.driverMessageLogger = debug_1.default(`testcafe:test-run:${userAgent}:driver-message`);
        this.commandLogger = debug_1.default(`testcafe:test-run:${userAgent}:command`);
    }
    static _addEntry(logger, data) {
        try {
            const entry = data ?
                indent_string_1.default(`\n${util_1.inspect(data, { isTestCafeInspect: true, compact: false })}\n`, ' ', 4) :
                '';
            logger(entry);
        }
        catch (e) {
            logger(e.stack ? e.stack : String(e));
        }
    }
    driverMessage(msg) {
        TestRunDebugLog._addEntry(this.driverMessageLogger, msg);
    }
    command(cmd) {
        TestRunDebugLog._addEntry(this.commandLogger, cmd);
    }
}
exports.default = TestRunDebugLog;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVidWctbG9nLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3Rlc3QtcnVuL2RlYnVnLWxvZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLCtCQUErQjtBQUMvQixrREFBZ0M7QUFDaEMsa0VBQXlDO0FBRXpDLE1BQXFCLGVBQWU7SUFDaEMsWUFBYSxTQUFTO1FBQ2xCLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxlQUFXLENBQUMscUJBQXFCLFNBQVMsaUJBQWlCLENBQUMsQ0FBQztRQUN4RixJQUFJLENBQUMsYUFBYSxHQUFTLGVBQVcsQ0FBQyxxQkFBcUIsU0FBUyxVQUFVLENBQUMsQ0FBQztJQUNyRixDQUFDO0lBRUQsTUFBTSxDQUFDLFNBQVMsQ0FBRSxNQUFNLEVBQUUsSUFBSTtRQUMxQixJQUFJO1lBQ0EsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUM7Z0JBQ2hCLHVCQUFZLENBQUMsS0FBSyxjQUFPLENBQUMsSUFBSSxFQUFFLEVBQUUsaUJBQWlCLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzNGLEVBQUUsQ0FBQztZQUVQLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUNqQjtRQUNELE9BQU8sQ0FBQyxFQUFFO1lBQ04sTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3pDO0lBQ0wsQ0FBQztJQUVELGFBQWEsQ0FBRSxHQUFHO1FBQ2QsZUFBZSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDN0QsQ0FBQztJQUVELE9BQU8sQ0FBRSxHQUFHO1FBQ1IsZUFBZSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3ZELENBQUM7Q0FDSjtBQTFCRCxrQ0EwQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbnNwZWN0IH0gZnJvbSAndXRpbCc7XG5pbXBvcnQgZGVidWdMb2dnZXIgZnJvbSAnZGVidWcnO1xuaW1wb3J0IGluZGVudFN0cmluZyBmcm9tICdpbmRlbnQtc3RyaW5nJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVzdFJ1bkRlYnVnTG9nIHtcbiAgICBjb25zdHJ1Y3RvciAodXNlckFnZW50KSB7XG4gICAgICAgIHRoaXMuZHJpdmVyTWVzc2FnZUxvZ2dlciA9IGRlYnVnTG9nZ2VyKGB0ZXN0Y2FmZTp0ZXN0LXJ1bjoke3VzZXJBZ2VudH06ZHJpdmVyLW1lc3NhZ2VgKTtcbiAgICAgICAgdGhpcy5jb21tYW5kTG9nZ2VyICAgICAgID0gZGVidWdMb2dnZXIoYHRlc3RjYWZlOnRlc3QtcnVuOiR7dXNlckFnZW50fTpjb21tYW5kYCk7XG4gICAgfVxuXG4gICAgc3RhdGljIF9hZGRFbnRyeSAobG9nZ2VyLCBkYXRhKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IGRhdGEgP1xuICAgICAgICAgICAgICAgIGluZGVudFN0cmluZyhgXFxuJHtpbnNwZWN0KGRhdGEsIHsgaXNUZXN0Q2FmZUluc3BlY3Q6IHRydWUsIGNvbXBhY3Q6IGZhbHNlIH0pfVxcbmAsICcgJywgNCkgOlxuICAgICAgICAgICAgICAgICcnO1xuXG4gICAgICAgICAgICBsb2dnZXIoZW50cnkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsb2dnZXIoZS5zdGFjayA/IGUuc3RhY2sgOiBTdHJpbmcoZSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJpdmVyTWVzc2FnZSAobXNnKSB7XG4gICAgICAgIFRlc3RSdW5EZWJ1Z0xvZy5fYWRkRW50cnkodGhpcy5kcml2ZXJNZXNzYWdlTG9nZ2VyLCBtc2cpO1xuICAgIH1cblxuICAgIGNvbW1hbmQgKGNtZCkge1xuICAgICAgICBUZXN0UnVuRGVidWdMb2cuX2FkZEVudHJ5KHRoaXMuY29tbWFuZExvZ2dlciwgY21kKTtcbiAgICB9XG59XG4iXX0=