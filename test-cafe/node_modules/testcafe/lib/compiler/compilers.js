"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.initTestFileCompilers = exports.getTestFileCompilers = void 0;
const testcafe_hammerhead_1 = __importDefault(require("testcafe-hammerhead"));
const testcafe_legacy_api_1 = require("testcafe-legacy-api");
const compiler_1 = __importDefault(require("./test-file/formats/es-next/compiler"));
const compiler_2 = __importDefault(require("./test-file/formats/typescript/compiler"));
const compiler_3 = __importDefault(require("./test-file/formats/coffeescript/compiler"));
const raw_1 = __importDefault(require("./test-file/formats/raw"));
const customizable_compilers_1 = __importDefault(require("../configuration/customizable-compilers"));
function createTestFileCompilers(options = {}) {
    return [
        new testcafe_legacy_api_1.Compiler(testcafe_hammerhead_1.default.processScript),
        new compiler_1.default(),
        new compiler_2.default(options[customizable_compilers_1.default.typescript]),
        new compiler_3.default(),
        new raw_1.default()
    ];
}
let testFileCompilers = [];
function getTestFileCompilers() {
    if (!testFileCompilers.length)
        initTestFileCompilers();
    return testFileCompilers;
}
exports.getTestFileCompilers = getTestFileCompilers;
function initTestFileCompilers(options) {
    testFileCompilers = createTestFileCompilers(options);
}
exports.initTestFileCompilers = initTestFileCompilers;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcGlsZXJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NvbXBpbGVyL2NvbXBpbGVycy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSw4RUFBNkM7QUFDN0MsNkRBQXlFO0FBQ3pFLG9GQUEwRTtBQUMxRSx1RkFBaUY7QUFDakYseUZBQXFGO0FBQ3JGLGtFQUEwRDtBQUMxRCxxR0FBNEU7QUFFNUUsU0FBUyx1QkFBdUIsQ0FBRSxPQUFPLEdBQUcsRUFBRTtJQUMxQyxPQUFPO1FBQ0gsSUFBSSw4QkFBc0IsQ0FBQyw2QkFBVSxDQUFDLGFBQWEsQ0FBQztRQUNwRCxJQUFJLGtCQUFzQixFQUFFO1FBQzVCLElBQUksa0JBQTBCLENBQUMsT0FBTyxDQUFDLGdDQUFxQixDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3pFLElBQUksa0JBQTRCLEVBQUU7UUFDbEMsSUFBSSxhQUFtQixFQUFFO0tBQzVCLENBQUM7QUFDTixDQUFDO0FBRUQsSUFBSSxpQkFBaUIsR0FBRyxFQUFFLENBQUM7QUFFM0IsU0FBZ0Isb0JBQW9CO0lBQ2hDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNO1FBQ3pCLHFCQUFxQixFQUFFLENBQUM7SUFFNUIsT0FBTyxpQkFBaUIsQ0FBQztBQUM3QixDQUFDO0FBTEQsb0RBS0M7QUFFRCxTQUFnQixxQkFBcUIsQ0FBRSxPQUFPO0lBQzFDLGlCQUFpQixHQUFHLHVCQUF1QixDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3pELENBQUM7QUFGRCxzREFFQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBoYW1tZXJoZWFkIGZyb20gJ3Rlc3RjYWZlLWhhbW1lcmhlYWQnO1xuaW1wb3J0IHsgQ29tcGlsZXIgYXMgTGVnYWN5VGVzdEZpbGVDb21waWxlciB9IGZyb20gJ3Rlc3RjYWZlLWxlZ2FjeS1hcGknO1xuaW1wb3J0IEVzTmV4dFRlc3RGaWxlQ29tcGlsZXIgZnJvbSAnLi90ZXN0LWZpbGUvZm9ybWF0cy9lcy1uZXh0L2NvbXBpbGVyJztcbmltcG9ydCBUeXBlU2NyaXB0VGVzdEZpbGVDb21waWxlciBmcm9tICcuL3Rlc3QtZmlsZS9mb3JtYXRzL3R5cGVzY3JpcHQvY29tcGlsZXInO1xuaW1wb3J0IENvZmZlZVNjcmlwdFRlc3RGaWxlQ29tcGlsZXIgZnJvbSAnLi90ZXN0LWZpbGUvZm9ybWF0cy9jb2ZmZWVzY3JpcHQvY29tcGlsZXInO1xuaW1wb3J0IFJhd1Rlc3RGaWxlQ29tcGlsZXIgZnJvbSAnLi90ZXN0LWZpbGUvZm9ybWF0cy9yYXcnO1xuaW1wb3J0IEN1c3RvbWl6YWJsZUNvbXBpbGVycyBmcm9tICcuLi9jb25maWd1cmF0aW9uL2N1c3RvbWl6YWJsZS1jb21waWxlcnMnO1xuXG5mdW5jdGlvbiBjcmVhdGVUZXN0RmlsZUNvbXBpbGVycyAob3B0aW9ucyA9IHt9KSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgbmV3IExlZ2FjeVRlc3RGaWxlQ29tcGlsZXIoaGFtbWVyaGVhZC5wcm9jZXNzU2NyaXB0KSxcbiAgICAgICAgbmV3IEVzTmV4dFRlc3RGaWxlQ29tcGlsZXIoKSxcbiAgICAgICAgbmV3IFR5cGVTY3JpcHRUZXN0RmlsZUNvbXBpbGVyKG9wdGlvbnNbQ3VzdG9taXphYmxlQ29tcGlsZXJzLnR5cGVzY3JpcHRdKSxcbiAgICAgICAgbmV3IENvZmZlZVNjcmlwdFRlc3RGaWxlQ29tcGlsZXIoKSxcbiAgICAgICAgbmV3IFJhd1Rlc3RGaWxlQ29tcGlsZXIoKVxuICAgIF07XG59XG5cbmxldCB0ZXN0RmlsZUNvbXBpbGVycyA9IFtdO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGVzdEZpbGVDb21waWxlcnMgKCkge1xuICAgIGlmICghdGVzdEZpbGVDb21waWxlcnMubGVuZ3RoKVxuICAgICAgICBpbml0VGVzdEZpbGVDb21waWxlcnMoKTtcblxuICAgIHJldHVybiB0ZXN0RmlsZUNvbXBpbGVycztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRUZXN0RmlsZUNvbXBpbGVycyAob3B0aW9ucykge1xuICAgIHRlc3RGaWxlQ29tcGlsZXJzID0gY3JlYXRlVGVzdEZpbGVDb21waWxlcnMob3B0aW9ucyk7XG59XG4iXX0=